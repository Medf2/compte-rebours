<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>7ELI A9RI G3AD 3LA CENTRALE</title>
  <style>
    :root{ --bg:#0f1724; --card:#0b1220; --accent:#4f46e5; --muted:#9aa4b2; --glass: rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{background:linear-gradient(180deg,#071021 0%, #081226 100%);color:#e6eef6;display:flex;align-items:center;justify-content:center;padding:20px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:22px;max-width:900px;width:100%;box-shadow:0 8px 30px rgba(2,6,23,0.7);text-align:center}
    h1{margin:0 0 10px;font-size:24px;text-transform:uppercase;letter-spacing:1px}
    img.rabbit{max-width:220px;border-radius:12px;margin-bottom:20px;box-shadow:0 0 15px rgba(255,255,255,0.1)}
    .countdown{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:15px}
    .tile{background:rgba(255,255,255,0.03);padding:12px;border-radius:10px;min-width:110px;text-align:center}
    .val{font-size:20px;font-weight:700}
    .label{font-size:12px;color:var(--muted);margin-top:6px}
    .progress-panel{background:rgba(255,255,255,0.02);padding:14px;border-radius:10px;text-align:left;margin-top:20px}
    .progress-bar{height:18px;background:rgba(255,255,255,0.03);border-radius:10px;overflow:hidden}
    .progress-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent), #06b6d4);transform-origin:left}
    .small{font-size:13px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="card">
    <img src="lapin.png" alt="Lapin avec montre" class="rabbit" />
    <h1>7ELI A9RI G3AD 3LA CENTRALE</h1>
    <div class="countdown" id="tiles"></div>
    <footer id="status">Compte à rebours jusqu'au 4 mai 2026.</footer>

    <div class="progress-panel">
      <div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px">
        <div>
          <div class="small">Taux d'avancement (depuis le 1er septembre)</div>
          <div style="font-weight:700;font-size:18px" id="percent">0.000000 %</div>
        </div>
        <div class="small" id="period">Période : —</div>
      </div>
      <div class="progress-bar" aria-hidden="true">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div style="display:flex;justify-content:space-between;margin-top:10px">
        <div class="small">Début : <span id="startText">—</span></div>
        <div class="small">Cible : <span id="targetText">—</span></div>
      </div>
    </div>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    function pad(n, digits=2){return String(n).padStart(digits,'0')}
    function formatDateLocal(dt){
      if(!dt) return '—';
      return dt.getFullYear() + '-' + pad(dt.getMonth()+1) + '-' + pad(dt.getDate()) + ' ' + pad(dt.getHours()) + ':' + pad(dt.getMinutes()) + ':' + pad(dt.getSeconds());
    }

    const tilesEl = $('tiles');
    const percentEl = $('percent');
    const progressFill = $('progressFill');
    const startText = $('startText');
    const targetText = $('targetText');
    const periodText = $('period');
    const status = $('status');

    function createTiles(){
      tilesEl.innerHTML = '';
      const keys = [
        {k:'days', label:'jours'},
        {k:'hours', label:'heures'},
        {k:'minutes', label:'minutes'},
        {k:'seconds', label:'secondes'},
        {k:'ms', label:'millisecondes'}
      ];
      for(const it of keys){
        const t = document.createElement('div'); t.className='tile';
        t.innerHTML = `<div class="val" id="val-${it.k}">--</div><div class="label">${it.label}</div>`;
        tilesEl.appendChild(t);
      }
    }
    createTiles();

    const targetDate = new Date('2026-05-04T00:00:00+02:00');

    function computeStartFor(target){
      const y = target.getFullYear();
      const sept = new Date(y, 8, 1, 0,0,0,0);
      if(target >= sept) return sept;
      return new Date(y-1,8,1,0,0,0,0);
    }

    function updateOnce(){
      const now = new Date();
      let diff = targetDate - now;
      const ended = diff <= 0;
      if(ended) diff = 0;

      const days = Math.floor(diff / (24*3600*1000));
      const hours = Math.floor((diff % (24*3600*1000)) / (3600*1000));
      const minutes = Math.floor((diff % (3600*1000)) / (60*1000));
      const seconds = Math.floor((diff % (60*1000)) / 1000);
      const ms = diff % 1000;

      $('val-days').textContent = days.toLocaleString('fr-FR');
      $('val-hours').textContent = pad(hours);
      $('val-minutes').textContent = pad(minutes);
      $('val-seconds').textContent = pad(seconds);
      $('val-ms').textContent = pad(ms,3);

      const start = computeStartFor(targetDate);
      const totalSpan = targetDate - start;
      const elapsed = Math.max(0, Math.min(now - start, totalSpan));
      let pct = 0;
      if(totalSpan > 0) pct = (elapsed/totalSpan)*100;
      if(now >= targetDate) pct = 100;
      if(now <= start) pct = 0;
      percentEl.textContent = pct.toFixed(6) + ' %';
      progressFill.style.width = Math.max(0, Math.min(100, pct)) + '%';

      startText.textContent = formatDateLocal(start);
      targetText.textContent = formatDateLocal(targetDate);
      periodText.textContent = `Période: ${start.getFullYear()}-09-01 → 4 mai 2026`;

      if(ended){
        status.textContent = 'La date cible (4 mai 2026) est atteinte !';
      } else {
        status.textContent = `Temps restant mis à jour: ${formatDateLocal(now)}`;
      }
    }

    function loop(){
      updateOnce();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>